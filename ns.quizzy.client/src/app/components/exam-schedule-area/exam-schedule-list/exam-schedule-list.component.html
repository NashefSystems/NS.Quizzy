<app-skeleton-loader *ngIf="isLoading" [count]="5"></app-skeleton-loader>
<div class="wrapper" *ngIf="!isLoading">
    <div class="action-buttons">
        <button mat-stroked-button (click)="accordion().openAll()">
            {{ 'EXPAND_ALL' | translate }}
        </button>
        <button mat-stroked-button (click)="accordion().closeAll()">
            {{ 'COLLAPSE_ALL' | translate }}
        </button>
        <button mat-stroked-button (click)="onPrint()">
            {{ 'PRINT' | translate }}
        </button>
    </div>
    <mat-accordion multi id="exam-list">
        <mat-expansion-panel *ngFor="let exam of exams" expanded="true">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <div class="exam-info-questionnaire">
                        ({{questionnairesDic[exam.questionnaireId].code}})
                        {{questionnairesDic[exam.questionnaireId].name}}
                    </div>
                    <div class="exam-description">
                        {{exam.startTime | date: 'dd/MM/yyyy HH:mm'}} {{getDay(exam.startTime) | translate}}
                        |
                        {{examTypesDic[exam.examTypeId].name }} - {{moedsDic[exam.moedId].name }}
                    </div>
                </mat-panel-title>
            </mat-expansion-panel-header>
            <div class="exam-info-container">
                <app-exam-info-value [icon]="'category'" [name]="'SUBJECT_AREA.NAME' | translate"
                    [value]="subjectsDic[questionnairesDic[exam.questionnaireId].subjectId].name"></app-exam-info-value>

                <app-exam-info-value [icon]="'schedule'" [name]="'EXAM_AREA.DURATION' | translate"
                    [value]="exam.duration | time : 'HH:mm'"></app-exam-info-value>

                <app-exam-info-value [icon]="'schedule'" [iconColor]="iconColor"
                    [name]="'EXAM_AREA.DURATION_WITH_EXTRA' | translate"
                    [value]="exam.durationWithExtra | time : 'HH:mm'"></app-exam-info-value>

                <app-exam-info-value *ngIf="exam.gradeIds && exam.gradeIds.length > 0" [icon]="'groups'"
                    [name]="'EXAM_AREA.GRADES' | translate" [value]="getGrades(exam.gradeIds)"></app-exam-info-value>

                <app-exam-info-value *ngIf="exam.improvementGradeIds && exam.improvementGradeIds.length > 0"
                    [icon]="'groups'" [iconColor]="iconColor" [name]="'EXAM_AREA.GRADES_GRADE_IMPROVEMENT' | translate"
                    [value]="getGrades(exam.improvementGradeIds)"></app-exam-info-value>

                <app-exam-info-value *ngIf="exam.classIds && exam.classIds.length > 0" [icon]="'school'"
                    [name]="'EXAM_AREA.CLASSES' | translate" [value]="getClasses(exam.classIds)"></app-exam-info-value>

                <app-exam-info-value *ngIf="exam.improvementClassIds && exam.improvementClassIds.length > 0"
                    [icon]="'school'" [iconColor]="iconColor" [name]="'EXAM_AREA.CLASSES_GRADE_IMPROVEMENT' | translate"
                    [value]="getClasses(exam.improvementClassIds)"></app-exam-info-value>
            </div>
        </mat-expansion-panel>
    </mat-accordion>
</div>